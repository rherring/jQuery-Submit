(function(a){a.fn.extend({submitForm:function(l){if(a(this).data("formstatus")!=="submitting"){var c=a(this),h=c.serialize(),i=c.attr("id"),b=c.attr("action"),k=c.attr("method"),f=a("#"+i+" :input"),j={responseMsg:a("#contact-response-"+i),waitTime:3000,fadeMsg:200,redirect:"",disableFields:true,reEnableFields:true};var e=a.extend(j,l),g=e.responseMsg.text();c.data("formstatus","submitting");e.responseMsg.hide().addClass("response-waiting").text("Please Wait...").fadeIn(e.fadeMsg);function d(m){return m.replace(/%0D%0A/g,"<br/>")}a.ajax({url:b,type:k,data:d(h),success:function(o){var n=jQuery.parseJSON(o),m="",p=n.returnTo;if(e.redirect!=""){p=e.redirect}console.log(n.status);console.log(p);console.log(n.humantest);switch(n.status){case"error":m="response-error";break;case"success":m="response-success";break}e.responseMsg.fadeOut(e.fadeMsg,function(){a(this).removeClass("response-waiting").addClass(m).text(n.message).fadeIn(e.fadeMsg,function(){if(m=="response-success"){f.not(":button, :submit, :reset, :hidden, :checkbox").val("");f.prop("disabled",e.disableFields)}setTimeout(function(){e.responseMsg.fadeOut(e.fadeMsg,function(){a(this).removeClass(m).text(g).fadeIn(e.fadeMsg);c.data("formstatus","idle");if(m=="response-success"){Cookies.remove("doubleCookie");a("#"+i).validate().resetForm();if(e.reEnableFields==true){f.prop("disabled",false)}else{f.prop("disabled",true)}if(n.humantest=="failed"){location.reload()}else{if(p!=null&&p!=""){window.location.href=p}}a("a.close-reveal-modal").trigger("click")}})},e.waitTime)})})}})}return false}})}(jQuery));